TASK 027 - Public planet state + v0.6-style refresh (grant-parity)

Mission:
Move planet state to public storage (hashed location IDs) and implement v0.6-style lazy arrival resolution via a public refresh, while preserving private coordinate validation.

Background:
The grant describes private validation -> public update, and v0.6 keeps planet coordinates private but stores discovered planet state publicly. Today planets are private notes, requiring proofs for every refresh/arrival resolution. This is a performance bottleneck and diverges from v0.6's public, lazy refresh model.

Scope:
Contract refactor + client updates + tests. High-impact change; keep loops bounded (max 12 arrivals). Maintain private validate -> public apply pattern.

Plan:
1) Define a public planet storage struct keyed by location_id (hashed), containing public fields that match v0.6 (owner, population/energy, silver, upgrades, artifacts, last_updated, etc.).
2) Keep coordinates private: location_id derivation remains in private functions and only hashed IDs are used publicly.
3) Add a public refresh function (only_self if called from private wrapper or public if safe) that:
   - processes up to 12 pending arrivals for the planet (earliest-first)
   - updates growth to current block/time
   - applies artifact arrival side effects
4) Replace per-arrival resolution with refresh-by-planet flow.
5) Update client to stop per-arrival proofs and use refresh (or rely on actions that auto-refresh).
6) Ensure all state transitions use private validate -> public apply pattern.

Acceptance criteria:
- Planet state is public (hashed location IDs), coordinates remain private.
- Arrival resolution is batched and ordered (earliest-first) via refresh; no per-arrival proofs required.
- Public refresh/updates use bounded loops (<=12).
- All state transitions remain private validate -> public apply (only_self).
- Client remains playable with updated refresh flow.

Risks / side-effects:
- Large refactor; must ensure parity with v0.6 behavior.
- Any accidental exposure of coordinates breaks privacy.
- Storage migration considerations.

Testing / benchmarks:
- New tests for refresh ordering, multi-arrival batch, and parity on arrival outcomes.
- Sanity test: move -> refresh applies arrival; ordering preserved.
- Basic client smoke test.
